<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../resources/bootstrap.css" type="text/css" />
  <link rel="stylesheet" href="../resources/main.css" type="text/css" />
</head>
<body>
<div id="content">

<div id="header">
<a href="../index.html"><h1 id="docstitle">Denali Documentation</h1></a>
</div>

<h2 id="tutorial">Tutorial</h2>
<p>In this tutorial, we will visualize a simple scalar tree with <em>denali</em>. We will see how to explore the landscape, provide a weight map, and visualize a second scalar function on the tree. We will also gain an intuition of how the landscape is used to represent the tree.</p>
<p>The files we will use in this tutorial are located in the <code>examples/tutorial</code> directory.</p>
<hr />
<p><strong>Table of contents</strong>:</p>
<ul>
<li><a href="#the-input-tree">The input tree</a></li>
<li><a href="#loading-the-tree">Loading the tree</a></li>
<li><a href="#exploring-the-landscape">Exploring the landscape</a></li>
<li><a href="#selecting-a-component">Selecting a component</a></li>
<li><a href="#interpreting-the-landscape">Interpreting the landscape</a></li>
<li><a href="#simplifying-the-visualization">Simplifying the visualization</a></li>
<li><a href="#choosing-a-root">Choosing a root</a></li>
<li><a href="#rebasing-the-landscape">Rebasing the landscape</a></li>
<li><a href="#specifying-a-weight-map">Specifying a weight map</a></li>
<li><a href="#specifying-a-color-map">Specifying a color map</a></li>
</ul>
<hr />
<h2 id="the-input-tree">The input tree</h2>
<p>The tree we will be visualizing is shown below:</p>
<center>
<img style="margin:20pt 20pt" width=400 src="../resources/tree.png">
</center>

<p>Of course, this tree is simpler than the usual sort of input we'll want to visualize with <em>denali</em>, but it is useful for demonstration purposes.</p>
<p>Each node has a positive integer id and a scalar value. In this case, the values are also positive integers, but in general they can be arbitrary real numbers. We also see that some edges have labels next to them. These represent the edges <em>members</em>: lists of vertices that are hidden within each edge. Each member has an unique id, distinct from the ids of the vertices in the tree, and an associated scalar value.</p>
<p>The undirected version of the above tree is represented in <code>examples/tutorial/tree.tree</code>.</p>
<p>If we look inside the file, this is what we see:</p>
<pre><code>9
11  30
10  53
9   51
8   58
7   39
5   32
4   16
3   66
1   62
11  7
10  3   6   64
10  7
9   10
8   7
5   4   0   25
5   1   2   45
5   7</code></pre>
<p>In brief, the format of the <code>tree.tree</code> file is as follows: the first line states the number of vertices in the tree. The next nine lines define the vertices: the first number is the id, and the second is the scalar value. The two numbers are separated by a tab. The remainder of the lines list the edges in the undirected tree. The first two numbers on each line are the ids of the vertices defining the edge. The trailing pairs of numbers on the line (if there are any) define the edge's members: the first number in the pair is the member's id, the second number is the member's value.</p>
<p>For more detailed information on the <code>.tree</code> format, see the <a href="formats.html#tree">format specification</a>.</p>
<h2 id="loading-the-tree">Loading the tree</h2>
<p>With <em>denali</em> running, click <strong>File→Open Tree</strong> and select the <code>tree.tree</code> file in <code>examples/tutorial</code>. You'll see the following:</p>
<center>
<img class="screenshot" src="../resources/tut-open.png">
</center>

<p><em>Denali</em> opens with with a birds-eye view of the landscape. By default, the node in the tree with the minimum scalar value is used as the base of the landscape. We'll see how to change this shortly.</p>
<h2 id="exploring-the-landscape">Exploring the landscape</h2>
<p>To explore the visualization, use the mouse:</p>
<ul>
<li><strong>Hold left mouse</strong>: Click and drag to rotate the landscape</li>
<li><strong>Scroll mouse wheel</strong>: Zoom in and out</li>
<li><strong>Hold mouse wheel</strong>: Translate the landscape</li>
<li><strong>Click right mouse</strong>: Select a component</li>
</ul>
<h2 id="selecting-a-component">Selecting a component</h2>
<p>Right clicking selects a component of the landscape. Each component of the landscape is mapped to an arc of the tree. When a component is selected, general information about the selection is printed in the status box in the lower left of the display.</p>
<p>Click the large blue component at the base of the landscape. The status box prints the following information:</p>
<pre><code>Component Selected: 4 → 5
Parent value: 16
Child value: 32
Persistence: 16
Component weight: 1
Parent total weight: 12
Child total weight: 10</code></pre>
<p>The meaning of each item is as follows:</p>
<ul>
<li><p><strong>Component selected</strong>: The ids of the nodes in the selected component are shown here. When the file was opened, the node with the minimum scalar value was automatically assumed to be the root of the tree. This induces a direction on the edges of the tree. Here, we see that node 4 is the parent of node 5 in the directed tree.</p></li>
<li><p><strong>Parent value</strong>: The scalar value associated with the parent node. Here, this is the scalar value associated with node 4.</p></li>
<li><p><strong>Child value</strong>: The scalar value associated with the child node. Here, this is the scalar value associated with node 5.</p></li>
<li><p><strong>Persistence</strong>: The <em>persistence</em> of the arc is the absolute difference between the parent value and the child value. This is used in simplification, as we'll see shortly.</p></li>
<li><p><strong>Component weight</strong>: The &quot;weight&quot; of a component is the sum of the weights of the members contained within the component. By default, a node or member's weight is simply one. If we look at the tree we used as input, we see that the edge between nodes 4 and 5 had a single member. Therefore, the weight of this component is one. Later, we'll see how to specify a positive real number to the vertices and members in the graph, effectively weighting components of the landscape. Note that edges which have no members have a component weight of zero.</p></li>
<li><p><strong>Parent total weight</strong>: The weight of the parent node, plus the weight of all nodes and members in the subtree rooted at the parent node.</p></li>
<li><p><strong>Child total weight</strong>: The weight of the child node, plus the weight of all nodes and members in the subtree rooted at the child node.</p></li>
</ul>
<h2 id="interpreting-the-landscape">Interpreting the landscape</h2>
<p>The landscape faithfully represents the structure of the tree used as input while intuitively displaying additional information.</p>
<p>A <em>component</em> of the landscape is a single, pyramid-like structure within the terrain. Components are in one-to-one correspondence with the arcs of the tree. Components can be selected by right clicking them, as we learned above. Therefore, selecting a component can be interpreted as selecting an arc in the tree.</p>
<p>Components always have a rectangular base. The top of the component is either a smaller rectangle, or a point; either are nested within the base rectangle when viewed from above or below. These rectangles or points are referred to as <em>contours</em>. Each contour — that is, each bottom and top of a component — corresponds to a node in the tree, as you might expect.</p>
<p>In <em>denali</em>, we've used a rectangular treemap algorithm to map each node in the tree to either a rectangular contour or a point. A branch (degree-2-or-higher) node in the tree is represented as a rectangular contour in the landscape, while leaf nodes are represented by points. The root node is also represented by a rectangular contour: namely the contour at the base of the landscape.</p>
<p>The nesting of the contours is important: a contour is nested in another if it is in the outer rectangle's subtree. If a rectangle or point is nested directly within a larger rectangle, the larger rectangle is the parent of the contour in the tree.</p>
<p>The height of a contour is determined by the associated node's scalar value. The volume of a contour is determined by the total volume of the associated node. The area between two contours when seen from above is determined by the component's weight.</p>
<h2 id="simplifying-the-visualization">Simplifying the visualization</h2>
<p>The tree we are visualizing now isn't very complicated, but sometimes, especially with noisy data, the tree may have many spurious features. These present as small, spiky features in the landscape, and can be distracting.</p>
<p><em>Denali</em> provides a way of suppressing these small features using <em>simplification by persistence</em>. As described above, <em>persistence</em> is the height of component in the landscape: the absolute difference between the parent's scalar value and the child's. A reasonable assumption is that leafy arcs with small persistence aren't very important, while arcs with high persistence are more likely to be of interested.</p>
<p>Simplification in <em>denali</em> is an operation on an entire subtree. First, we'll simplify the entire tree:</p>
<ol style="list-style-type: decimal">
<li>Right click the base of the landscape to select component 4 → 5.</li>
<li>Adjust the simplification threshold slider to about 10.</li>
<li>Click <strong>Refine Subtree</strong>.</li>
</ol>
<p>Your landscape should look like the following:</p>
<center>
<img class="screenshot" src="tut-simplified1.png">
</center>

<p><em>Denali</em> has iteratively collapsed leafy arcs with persistence less than the threshold. Along the way, new leafy arcs are created. For example, exploring the simplified landscape shows that the arc 7 → 3 now exists in our simplified tree. This arc wasn't present in the original tree, but simplification has connected the two. Note that the arc has a component weight of 3: this is because the arc &quot;contains&quot; nodes 9 and 10, as well as the member 6 which was originally in the arc from 10 → 3. In this way, the total weight of node 7 has remained the same. That is to say: simplification of a subtree preserves the subtree's total weight.</p>
<p>A careful reader will note that node 11 is no longer in the landscape and it wasn't listed as a member of the 7 → 3 arc. In actuality, node 11 is internally represented as a member of node 7 and contributes to its total weight.</p>
<p>Simplifications can be made in series, and they apply only to the subtree of the selected component. For example, suppose we wanted to see the structure of the simplified 7 → 3 component in more detail.</p>
<ol style="list-style-type: decimal">
<li>Right click the 7 → 3 component.</li>
<li>Adjust the simplification slider to about 5.</li>
<li>Click <strong>Refine Subtree</strong>.</li>
</ol>
<p>You'll see the following:</p>
<center>
<img class="screenshot" src="tut-simplified2.png">
</center>

<p>The 7 → 3 component was completely expanded, and the subtree was then simplified down using the new threshold of 5. However, other parts of the landscape, which were previously simplified with a threshold of 10, were left untouched.</p>
<p>Lastly, we may wish to start over and view the entire, unsimplified tree. To do this, select the <strong>Expand</strong> button in the simplification pane.</p>
<h2 id="choosing-a-root">Choosing a root</h2>
<p>When a new landscape is opened in <em>denali</em> the node with the minimum scalar value is used as the base of the landscape. Depending on what the tree represents, however, it may be useful to select a different node as the root.</p>
<p>To select a root, click the <strong>Choose Root</strong> button in the <em>Root Selection</em> pane. To use the maximum node as the root, select the <strong>Maximum node</strong> option. Any vertex in the tree may be used as the root. For example, to set node 7 to be the root, click the radio button next to <strong>Other</strong> and insert 7 in the box, then click <strong>Ok</strong>.</p>
<p>As you see, not all root selections lead to interesting or aesthetically-pleasing visualizations. More often than not, the maximum or minimum nodes are the best choices.</p>
<p>Before we continue, set the root of the landscape to be the minimum node.</p>
<h2 id="rebasing-the-landscape">Rebasing the landscape</h2>
<p>Suppose we are interested in a particular subtree or section of the landscape. We can visualize this section alone by <em>rebasing</em> the tree.</p>
<p>For example, suppose we are only interested in the subtree rooted at node 7, and we'd like to get rid of the rest of the landscape:</p>
<ol style="list-style-type: decimal">
<li>Right click to select the 5 → 7 component. In the context of rebasing, this is equivalent to selecting the 7 node.</li>
<li>Click the <strong>Rebase</strong> button in the <em>Root Selection</em> pane.</li>
</ol>
<p>The rebased landscape now appears in the visualization window. To return to visualizing the full landscape, you'll need to open the tree again by selecting <strong>File → Open Tree</strong>. Before proceeding with the tutorial, make sure that you've done so.</p>
<h2 id="specifying-a-weight-map">Specifying a weight map</h2>
<p><strong>Important</strong>: Before continuing, make sure that the full tree is being visualized by selecting <strong>File → Open Tree</strong> and choosing <code>examples/tutorial/tree.tree</code>.</p>
<p>Each vertex and member in the scalar tree has an associated weight. By default, this weight is simply one. If we'd like to draw attention to a part of the landscape, or represent a second scalar function using the volume of the landscape components, we can specify a mapping from vertex or member id to a positive scalar value.</p>
<p>In this example, we'll re-weight node 8 to have weight 40, and member 0 to have weight 20. If you open the file <code>examples/tutorial/tree.weights</code>, this is what you'll see:</p>
<pre><code>0   20
8   40</code></pre>
<p>These two lines specify the weights for the node and member. Note that not every node or member in the tree appears in the file: a partial mapping is sufficient. Any node or member not listed in the mapping is assumed to have unit weight. For more information on the weight map file format, see the <a href="formats.html#weights">specification</a>.</p>
<p>Now we will load the weight map:</p>
<ol style="list-style-type: decimal">
<li>Click <strong>File → Load Weight Map</strong>.</li>
<li>Select <code>examples/tutorial/tree.weights</code>.</li>
</ol>
<p>This is what you'll see:</p>
<center>
<img class="screenshot" src="tut-simplified2.png">
</center>

<p>Node 8 is a leaf node at the top of the landscape. If we select component 7 → 8, we see that the child total weight is 40.</p>
<p>Member 0 is a member of the 4 → 5 arc. If we select this component, we see that the component weight is 20, as expected.</p>
<p>You can make changes to the weight map while <em>denali</em> is running, but to recompute the landscape to reflect the changes, you'll need to reload the weight file by following the steps above. If you'd like to go back to visualizing the unweighted landscape, click <strong>File → Clear Weight Map</strong>.</p>
<h2 id="specifying-a-color-map">Specifying a color map</h2>
<p>By default, the color of the landscape is a function of the height (i.e, the scalar value of the vertices). It is possible, however, to choose a custom color function. This is useful, for example, to visualize a second scalar function on top of the landscape.</p>
<p>As noted above, interactively simplifying the tree may create and destroy arcs. Having the user specify a color map by associating each arc to a color is therefore infeasible. Instead, <em>denali</em> has the user map each node and member of the tree to a second scalar value. The user then selects from a set of rules which assign to each arc of the tree a single scalar value. This value is then used to give the arc a color.</p>
<p>Consider, for example, the arc from 4 → 5 in the example tree above. This arc has has a member. In general, an arc may have many members, or none at all. The user will provide a color map associated to the two nodes and member a second scalar value.</p>
<p>There are many ways to reduce these three values associated with the arc to a single value, thereby mapping the arc to a color. For example, we may simply take the mean of the three values. Alternatively, we might want only the parent and child nodes to contribute to the mean. Even simpler, we might just set the value of the child node to be the representative value of the arc.</p>
<p>In each case, we define a set of <em>contributors</em> and a <em>reduction</em>. The set of contributors includes either the parent, child, or both, and optionally the members in the arc. <em>Denal</em> also provides many reductions, such as max, min, mean, and variance, which reduce the set of scalar values associated with the contributors to a single scalar value.</p>
<p>Let's look at a concrete example. First, we must assign each node and member in the tree a second scalar value. Let's just assign each node and member the same value it has in our original tree. This has already been done for you in <code>examples/tutorial/tree.colors</code>. If you open the file, this is what you'll see:</p>
<pre><code>11  30
10  53
9   51
8   58
7   39
5   32
4   16
3   66
1   62
6   64
0   25
2   45</code></pre>
<p>Each node and member in the tree has it's own line. The first number is the id of the node or member, and the second is the value. For more information on the format of <code>.colors</code> files, see the <a href="formats.html#colors">specification</a>.</p>
<p>To use this color map:</p>
<ol style="list-style-type: decimal">
<li>Select <strong>File → Configure Color Map</strong>.</li>
<li>Click <strong>Browse</strong> and select the <code>examples/tutorial/tree.colors</code> color map.</li>
<li>In the <em>Contributors</em> pane, select <strong>Child</strong> and <em>de</em>select <strong>Include members</strong>.</li>
<li>In the <em>Reduction</em> drop-down menu, select <strong>Maximum</strong>.</li>
</ol>
<p>This is what you'll see:</p>
<center>
<img class="screenshot" src="tut-simplified2.png">
</center>

<p>What we've done is set the color of each component to be the scalar value assigned to the child node. The color map we've specified isn't very interesting, though: each node and member is mapped to the same scalar value it had in the original tree.</p>
<p>Two of the reductions provided by <em>denali</em> are a bit different: the covariance and correlation reductions. These reductions compute the covariance and correlation between the color scalar function and the original scalar function, useful for comparing the two mappings.</p>
</div>
</body>
</html>
